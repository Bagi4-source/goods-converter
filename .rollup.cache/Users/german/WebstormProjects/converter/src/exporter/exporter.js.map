{"version":3,"file":"exporter.js","sourceRoot":"","sources":["exporter.ts"],"names":[],"mappings":"AAAA,OAAO,EAA8B,UAAU,EAAC,MAAM,cAAc,CAAC;AAGrE,OAAO,QAAQ,MAAM,UAAU,CAAC;AAEhC,MAAM,OAAO,QAAQ;IAArB;QACY,cAAS,GAAc,UAAU,CAAC,GAAG,CAAA;QACrC,iBAAY,GAAG,IAAI,KAAK,EAAe,CAAA;IAqBnD,CAAC;IAlBG,eAAe,CAAC,YAA2B;QACvC,IAAI,CAAC,YAAY,GAAG,YAAY,CAAA;IACpC,CAAC;IAED,YAAY,CAAC,SAAoB;QAC7B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAA;IAC9B,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,QAAmB,EAAE,UAAuB,EAAE,MAAyB;QAChF,MAAM,mBAAmB,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;YACzD,IAAI,kBAAkB,GAAY,OAAO,CAAC;YAC1C,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;gBACpC,kBAAkB,GAAG,WAAW,CAAC,kBAAkB,CAAC,CAAA;YACxD,CAAC,CAAC,CAAA;YACF,OAAO,kBAAkB,CAAA;QAC7B,CAAC,CAAC,CAAA;QACF,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,mBAAmB,EAAE,UAAU,EAAE,MAAM,CAAC,CAAA;IACzE,CAAC;CACJ","sourcesContent":["import {Formatter, FormatterOptions, Formatters} from \"../formatter\";\nimport {Transformer} from \"./exporter.types\";\nimport {Category, Product} from \"../types\";\nimport deepcopy from \"deepcopy\";\n\nexport class Exporter {\n    private formatter: Formatter = Formatters.YML\n    private transformers = new Array<Transformer>()\n\n\n    setTransformers(transformers: Transformer[]) {\n        this.transformers = transformers\n    }\n\n    setFormatter(formatter: Formatter) {\n        this.formatter = formatter\n    }\n\n    async export(products: Product[], categories?: Category[], option?: FormatterOptions): Promise<string> {\n        const transformedProducts = deepcopy(products).map(product => {\n            let transformedProduct: Product = product;\n            this.transformers.forEach(transformer => {\n                transformedProduct = transformer(transformedProduct)\n            })\n            return transformedProduct\n        })\n        return this.formatter.format(transformedProducts, categories, option)\n    }\n}"]}