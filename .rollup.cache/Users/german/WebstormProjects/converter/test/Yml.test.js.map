{"version":3,"file":"Yml.test.js","sourceRoot":"","sources":["Yml.test.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,QAAQ,EAAqB,GAAG,EAAC,MAAM,cAAc,CAAC;AAC9D,OAAO,EAAC,QAAQ,EAAE,EAAE,EAAC,MAAM,WAAW,CAAC;AACvC,OAAO,EAAC,MAAM,EAAC,MAAM,MAAM,CAAC;AAC5B,OAAO,EAAC,UAAU,EAAC,MAAM,QAAQ,CAAC;AAGlC,QAAQ,CAAC,cAAc,EAAE,GAAG,EAAE;IAC1B,MAAM,SAAS,GAAG,UAAU,CAAC,GAAG,CAAC;IAEjC,EAAE,CAAC,wBAAwB,EAAE,KAAK,IAAI,EAAE;QACpC,MAAM,QAAQ,GAAc;YACxB;gBACI,SAAS,EAAE,CAAC;gBACZ,QAAQ,EAAE,CAAC;gBACX,SAAS,EAAE,IAAI;gBACf,QAAQ,EAAE,QAAQ,CAAC,GAAG;gBACtB,KAAK,EAAE,OAAO;gBACd,WAAW,EAAE,aAAa;gBAC1B,MAAM,EAAE,MAAM;gBACd,UAAU,EAAE,WAAW;gBACvB,UAAU,EAAE,CAAC;gBACb,eAAe,EAAE,OAAO;gBACxB,MAAM,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC;gBAC5B,KAAK,EAAE,KAAK;gBACZ,QAAQ,EAAE,KAAK;gBACf,kBAAkB,EAAE,IAAI;gBACxB,aAAa,EAAE,KAAK;gBACpB,SAAS,EAAE,IAAI;gBACf,OAAO,EAAE,cAAc;gBACvB,MAAM,EAAE,IAAI;gBACZ,UAAU,EAAE,UAAU;gBACtB,GAAG,EAAE,GAAG,CAAC,MAAM;gBACf,KAAK,EAAE,EAAE;gBACT,MAAM,EAAE,CAAC;wBACL,GAAG,EAAE,IAAI;wBACT,KAAK,EAAE,IAAI;qBACd,EAAE;wBACC,GAAG,EAAE,IAAI;wBACT,KAAK,EAAE,IAAI;qBACd,CAAC;gBACF,GAAG,EAAE;oBACD,IAAI,EAAE,MAAM;oBACZ,KAAK,EAAE,CAAC;iBACX;gBACD,IAAI,EAAE,CAAC,MAAM,EAAE,WAAW,CAAC;gBAC3B,KAAK,EAAE,KAAK;aACf;SACJ,CAAC;QACF,MAAM,UAAU,GAAe;YAC3B,EAAC,EAAE,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAC;YACnC,EAAC,EAAE,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,4BAA4B,EAAC;YACxD,EAAC,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,YAAY,EAAC;SAC9B,CAAA;QACD,MAAM,MAAM,GAAG,MAAM,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,UAAU,EAAE,EAAC,QAAQ,EAAE,OAAO,EAAE,WAAW,EAAE,OAAO,EAAC,CAAC,CAAC;QACvG,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAC3D,MAAM,cAAc,GAAG,6EAA6E,IAAI,28BAA28B,CAAC;QACpjC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;IACjD,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC","sourcesContent":["import {Currency, Category, Product, Vat} from \"../src/types\";\nimport {describe, it} from \"node:test\";\nimport {expect} from 'chai';\nimport {Formatters} from \"../src\";\n\n\ndescribe('YMLConverter', () => {\n    const formatter = Formatters.YML;\n\n    it('should export YML data', async () => {\n        const products: Product[] = [\n            {\n                productId: 1,\n                parentId: 0,\n                variantId: 1111,\n                currency: Currency.RUR,\n                title: \"Title\",\n                description: \"Description\",\n                vendor: \"Nike\",\n                vendorCode: \"NIKE-1111\",\n                categoryId: 1,\n                countryOfOrigin: \"Китай\",\n                images: [\"image1\", \"image2\"],\n                price: 19000,\n                oldPrice: 20000,\n                additionalExpenses: 1000,\n                purchasePrice: 15000,\n                available: true,\n                barcode: \"567890567893\",\n                weight: 0.15,\n                dimensions: \"12/32/43\",\n                vat: Vat.VAT_20,\n                count: 24,\n                params: [{\n                    key: \"p1\",\n                    value: \"v1\"\n                }, {\n                    key: \"p2\",\n                    value: \"v2\"\n                }],\n                age: {\n                    unit: \"year\",\n                    value: 6\n                },\n                tags: [\"Nike\", \"Кроссовки\"],\n                adult: false\n            }\n        ];\n        const categories: Category[] = [\n            {id: 1, parentId: 2, name: \"Обувь\"},\n            {id: 2, parentId: 3, name: \"Одежда, обувь и аксессуары\"},\n            {id: 3, name: \"Все товары\"},\n        ]\n        const result = await formatter.format(products, categories, {shopName: \"Bagi4\", companyName: \"Bagi4\"});\n        const date = new Date().toISOString().replace(/.\\d+Z/, '');\n        const expectedResult = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><yml_catalog date=\"${date}\"><shop><name>Bagi4</name><company>Bagi4</company><categories><category id=\"1\" parentId=\"2\">Обувь</category><category id=\"2\" parentId=\"3\">Одежда, обувь и аксессуары</category><category id=\"3\">Все товары</category></categories><offers><offer id=\"1111\"><name>Title</name><price>19000</price><oldprice>20000</oldprice><purchase_price>15000</purchase_price><additional_expenses>1000</additional_expenses><currencyId>RUR</currencyId><categoryId>1</categoryId><vendor>Nike</vendor><vendorCode>NIKE-1111</vendorCode><picture>image1</picture><picture>image2</picture><available>true</available><param name=\"p1\">v1</param><param name=\"p2\">v2</param><description><![CDATA[Description]]></description><country_of_origin>Китай</country_of_origin><barcode>567890567893</barcode><vat>VAT_20</vat><count>24</count><set-ids>Nike, Кроссовки</set-ids><adult>false</adult><weight>0.15</weight><dimensions>12/32/43</dimensions><age unit=\"year\">6</age></offer></offers></shop></yml_catalog>`;\n        expect(result).to.deep.equal(expectedResult);\n    });\n});\n"]}